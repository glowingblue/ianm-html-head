{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@ianm/html-head/webpack/bootstrap","webpack://@ianm/html-head/webpack/runtime/compat get default export","webpack://@ianm/html-head/webpack/runtime/define property getters","webpack://@ianm/html-head/webpack/runtime/hasOwnProperty shorthand","webpack://@ianm/html-head/webpack/runtime/make namespace object","webpack://@ianm/html-head/external root \"flarum.core.compat['admin/app']\"","webpack://@ianm/html-head/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@ianm/html-head/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@ianm/html-head/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/Component']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/Button']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@ianm/html-head/./src/admin/components/CreateHeadItemModal.js","webpack://@ianm/html-head/./src/admin/components/HeadItemListItem.js","webpack://@ianm/html-head/./src/admin/components/HeadItemList.js","webpack://@ianm/html-head/./src/admin/htmlHeadSettingsPage.js","webpack://@ianm/html-head/external root \"flarum.core.compat['common/Model']\"","webpack://@ianm/html-head/./src/admin/model/HeadItem.js","webpack://@ianm/html-head/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default class CreateHeadItemModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.item = this.attrs.item || app.store.createRecord('html-headers');\n\n    this.description = Stream(this.item.description() || '');\n    this.header = Stream(this.item.header() || '');\n\n    this.loading = false;\n  }\n\n  className() {\n    return 'Modal--medium';\n  }\n\n  title() {\n    return this.item.exists\n      ? app.translator.trans('ianm-html-head.admin.modal.edit_title')\n      : app.translator.trans('ianm-html-head.admin.modal.create_title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>{app.translator.trans('ianm-html-head.admin.modal.text')}</p>\n\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('ianm-html-head.admin.modal.description_label')}</label>\n          <input type=\"text\" className=\"FormControl\" bidi={this.description} required />\n        </div>\n\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('ianm-html-head.admin.modal.header_label')}</label>\n          <input type=\"text\" className=\"FormControl\" bidi={this.header} required placeholder='<link rel=\"example\" href=\"example\">' />\n        </div>\n\n        <div className=\"Form-group\">\n          <Button className=\"Button Button--primary\" type=\"submit\" loading={this.loading}>\n            {app.translator.trans('ianm-html-head.admin.modal.save_button')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    if (!this.header()) return;\n\n    this.loading = true;\n\n    const attrs = {\n      description: this.description(),\n      header: this.header(),\n    };\n\n    this.item.save(attrs).then(this.hide.bind(this), this.onerror.bind(this), this.loaded.bind(this));\n  }\n}\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport CreateHeadItemModal from './CreateHeadItemModal';\n\nexport default class HeadItemListItem extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.item = this.attrs.headItem;\n  }\n\n  view() {\n    return (\n      <tr>\n        <td>{this.item.description()}</td>\n        <td>\n          <code>{this.item.header()}</code>\n        </td>\n        <td>\n          {Switch.component({\n            state: this.item.data.attributes.active,\n            onchange: (value) => {\n              this.activeLoading = true;\n\n              app\n                .request({\n                  method: 'PATCH',\n                  url: `${app.forum.attribute('apiUrl')}/html-headers/${this.item.id()}`,\n                  body: {\n                    active: value,\n                  },\n                })\n                .then((response) => {\n                  this.item.data = response.data;\n                  this.activeLoading = false;\n\n                  m.redraw();\n                });\n            },\n            loading: this.activeLoading,\n          })}\n        </td>\n        <td>\n          <div className=\"Button--group\">\n            {Button.component(\n              {\n                className: 'Button Button--secondary',\n                onclick: () => app.modal.show(CreateHeadItemModal, { item: this.item }),\n              },\n              app.translator.trans('ianm-html-head.admin.table.edit_button')\n            )}\n            {Button.component(\n              {\n                className: 'Button Button--danger',\n                onclick: () => {\n                  this.deleting = true;\n                  this.item.delete().then(() => {\n                    this.deleting = false;\n                    m.redraw();\n                  });\n                },\n                loading: this.deleting,\n              },\n              app.translator.trans('ianm-html-head.admin.table.delete_button')\n            )}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n}\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport Button from 'flarum/common/components/Button';\nimport HeadItemListItem from './HeadItemListItem';\nimport CreateHeadItemModal from './CreateHeadItemModal';\n\nexport default class HeadItemList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = true;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.refresh();\n  }\n\n  view() {\n    return (\n      <div>\n        <div className=\"HtmlHeadSettingsPage--controls\">\n          {Button.component(\n            {\n              className: 'Button Button--primary',\n              icon: 'fas fa-plus',\n              onclick: () => app.modal.show(CreateHeadItemModal),\n            },\n            app.translator.trans('ianm-html-head.admin.create_button')\n          )}\n        </div>\n        <br />\n        <div className=\"HtmlHeadSettingsPage-table\">\n          {this.loading ? (\n            LoadingIndicator.component()\n          ) : app.store.all('html-headers').length ? (\n            <table style={{ width: '100%', textAlign: 'left' }} className=\"table\">\n              <thead>\n                <tr>\n                  <th>{app.translator.trans('ianm-html-head.admin.table.description_label')}</th>\n                  <th>{app.translator.trans('ianm-html-head.admin.table.header_label')}</th>\n                  <th>{app.translator.trans('ianm-html-head.admin.table.active_label')}</th>\n                  <th />\n                </tr>\n              </thead>\n              <tbody>{app.store.all('html-headers').map((headItem) => HeadItemListItem.component({ headItem }))}</tbody>\n            </table>\n          ) : (\n            <div>{Placeholder.component({ text: app.translator.trans('ianm-html-head.admin.table.empty_text') })}</div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  refresh() {\n    return this.loadResults().then(this.parseResults.bind(this));\n  }\n\n  /**\n   * Load a new page of HeadItem results.\n   *\n   * @param {Integer} page number.\n   * @return {Promise}\n   */\n  loadResults() {\n    return app.store.find('html-headers');\n  }\n\n  /**\n   * Parse results and append them to the page list.\n   *\n   * @param {Page[]} results\n   * @return {Page[]}\n   */\n  parseResults(results) {\n    this.loading = false;\n\n    m.redraw();\n  }\n}\n","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport HeadItem from './components/HeadItemList';\n\nexport default class HtmlHeadSettingsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  content() {\n    return [\n      <div className=\"container\">\n        <div className=\"HtmlHeadSettingsPage\">\n          <HeadItem />\n        </div>\n      </div>,\n    ];\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class HeadItem extends Model {\n  id = Model.attribute('id');\n  description = Model.attribute('description');\n  header = Model.attribute('header');\n  active = Model.attribute('active');\n}\n","import app from 'flarum/admin/app';\nimport HtmlHeadSettingsPage from './htmlHeadSettingsPage';\nimport HeadItem from './model/HeadItem';\n\napp.initializers.add('ianm-html-head', () => {\n  app.store.models['html-headers'] = HeadItem;\n  app.extensionData.for('ianm-html-head').registerPage(HtmlHeadSettingsPage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","CreateHeadItemModal","oninit","vnode","this","item","attrs","app","description","Stream","header","loading","className","title","exists","content","type","bidi","required","placeholder","onsubmit","e","preventDefault","save","then","hide","bind","onerror","loaded","Modal","HeadItemListItem","headItem","view","Switch","state","data","attributes","active","onchange","activeLoading","method","url","id","body","response","m","redraw","Button","onclick","deleting","Component","HeadItemList","oncreate","refresh","icon","LoadingIndicator","length","style","width","textAlign","map","component","Placeholder","text","loadResults","parseResults","results","HtmlHeadSettingsPage","ExtensionPage","HeadItem","Model","registerPage"],"sourceRoot":""}