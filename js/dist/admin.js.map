{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@ianm/html-head/webpack/bootstrap","webpack://@ianm/html-head/webpack/runtime/compat get default export","webpack://@ianm/html-head/webpack/runtime/define property getters","webpack://@ianm/html-head/webpack/runtime/hasOwnProperty shorthand","webpack://@ianm/html-head/webpack/runtime/make namespace object","webpack://@ianm/html-head/external root \"flarum.core.compat['admin/app']\"","webpack://@ianm/html-head/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@ianm/html-head/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@ianm/html-head/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/Component']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/Button']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@ianm/html-head/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@ianm/html-head/./src/admin/components/CreateHeadItemModal.js","webpack://@ianm/html-head/./src/admin/components/HeadItemListItem.js","webpack://@ianm/html-head/./src/admin/components/HeadItemList.js","webpack://@ianm/html-head/./src/admin/htmlHeadSettingsPage.js","webpack://@ianm/html-head/external root \"flarum.core.compat['common/Model']\"","webpack://@ianm/html-head/./src/admin/model/HeadItem.js","webpack://@ianm/html-head/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Placeholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default class CreateHeadItemModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.item = this.attrs.item || app.store.createRecord('html-headers');\n\n    this.description = Stream(this.item.description() || '');\n    this.header = Stream(this.item.header() || '');\n\n    this.loading = false;\n  }\n\n  className() {\n    return 'Modal--medium';\n  }\n\n  title() {\n    return this.item.exists\n      ? app.translator.trans('ianm-html-head.admin.modal.edit_title')\n      : app.translator.trans('ianm-html-head.admin.modal.create_title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>{app.translator.trans('ianm-html-head.admin.modal.text')}</p>\n\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('ianm-html-head.admin.modal.description_label')}</label>\n          <input type=\"text\" className=\"FormControl\" bidi={this.description} required />\n        </div>\n\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('ianm-html-head.admin.modal.header_label')}</label>\n          <input type=\"text\" className=\"FormControl\" bidi={this.header} required placeholder='<link rel=\"example\" href=\"example\">' />\n        </div>\n\n        <div className=\"Form-group\">\n          <Button className=\"Button Button--primary\" type=\"submit\" loading={this.loading}>\n            {app.translator.trans('ianm-html-head.admin.modal.save_button')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    const attrs = {\n      description: this.description(),\n      header: this.header(),\n    };\n\n    this.item.save(attrs).then(this.hide.bind(this), this.onerror.bind(this), this.loaded.bind(this));\n  }\n}\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport CreateHeadItemModal from './CreateHeadItemModal';\n\nexport default class HeadItemListItem extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.item = this.attrs.headItem;\n  }\n\n  view() {\n    return (\n      <tr>\n        <td>{this.item.description()}</td>\n        <td>\n          <code>{this.item.header()}</code>\n        </td>\n        <td>\n          {Switch.component({\n            state: this.item.active(),\n            onchange: (value) => {\n              this.activeLoading = true;\n\n              app\n                .request({\n                  method: 'PATCH',\n                  url: `${app.forum.attribute('apiUrl')}/html-headers/${this.item.id()}`,\n                  body: {\n                    active: value,\n                  },\n                })\n                .then((response) => {\n                  this.item.data = response.data;\n                  this.activeLoading = false;\n\n                  m.redraw();\n                });\n            },\n            loading: this.activeLoading,\n          })}\n        </td>\n        <td>\n          <div className=\"Button--group\">\n            {Button.component(\n              {\n                className: 'Button Button--secondary',\n                onclick: () => app.modal.show(CreateHeadItemModal, { item: this.item }),\n              },\n              app.translator.trans('ianm-html-head.admin.table.edit_button')\n            )}\n            {Button.component(\n              {\n                className: 'Button Button--danger',\n                onclick: () => {\n                  this.deleting = true;\n                  this.item.delete().then(() => {\n                    this.deleting = false;\n                    m.redraw();\n                  });\n                },\n                loading: this.deleting,\n              },\n              app.translator.trans('ianm-html-head.admin.table.delete_button')\n            )}\n          </div>\n        </td>\n      </tr>\n    );\n  }\n}\n","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport Button from 'flarum/common/components/Button';\nimport HeadItemListItem from './HeadItemListItem';\nimport CreateHeadItemModal from './CreateHeadItemModal';\n\nexport default class HeadItemList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = true;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.refresh();\n  }\n\n  view() {\n    return (\n      <div>\n        <div className=\"HtmlHeadSettingsPage--controls\">\n          {Button.component(\n            {\n              className: 'Button Button--primary',\n              icon: 'fas fa-plus',\n              onclick: () => app.modal.show(CreateHeadItemModal),\n            },\n            app.translator.trans('ianm-html-head.admin.create_button')\n          )}\n        </div>\n        <br />\n        <div className=\"HtmlHeadSettingsPage-table\">\n          {this.loading ? (\n            LoadingIndicator.component()\n          ) : app.store.all('html-headers').length ? (\n            <table style={{ width: '100%', textAlign: 'left' }} className=\"table\">\n              <thead>\n                <tr>\n                  <th>{app.translator.trans('ianm-html-head.admin.table.description_label')}</th>\n                  <th>{app.translator.trans('ianm-html-head.admin.table.header_label')}</th>\n                  <th>{app.translator.trans('ianm-html-head.admin.table.active_label')}</th>\n                  <th />\n                </tr>\n              </thead>\n              <tbody>{app.store.all('html-headers').map((headItem) => HeadItemListItem.component({ headItem }))}</tbody>\n            </table>\n          ) : (\n            <div>{Placeholder.component({ text: app.translator.trans('ianm-html-head.admin.table.empty_text') })}</div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  refresh() {\n    return this.loadResults().then(this.parseResults.bind(this));\n  }\n\n  /**\n   * Load a new page of HeadItem results.\n   *\n   * @param {Integer} page number.\n   * @return {Promise}\n   */\n  loadResults() {\n    return app.store.find('html-headers');\n  }\n\n  /**\n   * Parse results and append them to the page list.\n   *\n   * @param {Page[]} results\n   * @return {Page[]}\n   */\n  parseResults(results) {\n    this.loading = false;\n\n    m.redraw();\n  }\n}\n","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport HeadItem from './components/HeadItemList';\n\nexport default class HtmlHeadSettingsPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  content() {\n    return [\n      <div className=\"container\">\n        <div className=\"HtmlHeadSettingsPage\">\n          <HeadItem />\n        </div>\n      </div>,\n    ];\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\n\nexport default class HeadItem extends Model {\n  id = Model.attribute('id');\n  description = Model.attribute('description');\n  header = Model.attribute('header');\n  active = Model.attribute('active');\n}\n","import app from 'flarum/admin/app';\nimport HtmlHeadSettingsPage from './htmlHeadSettingsPage';\nimport HeadItem from './model/HeadItem';\n\napp.initializers.add('ianm-html-head', () => {\n  app.store.models['html-headers'] = HeadItem;\n  app.extensionData.for('ianm-html-head').registerPage(HtmlHeadSettingsPage);\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","CreateHeadItemModal","oninit","vnode","this","item","attrs","app","createRecord","description","Stream","header","loading","className","title","exists","trans","content","type","bidi","required","placeholder","onsubmit","e","preventDefault","save","then","hide","bind","onerror","loaded","Modal","HeadItemListItem","headItem","view","Switch","state","active","onchange","activeLoading","method","url","attribute","id","body","response","data","m","redraw","Button","onclick","show","deleting","Component","HeadItemList","oncreate","refresh","icon","LoadingIndicator","all","length","style","width","textAlign","map","component","Placeholder","text","loadResults","parseResults","find","results","HtmlHeadSettingsPage","ExtensionPage","HeadItem","Model","add","models","registerPage"],"sourceRoot":""}